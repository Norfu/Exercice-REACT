<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <!-- babel => compilation du JSX -->
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <title>Exo react</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const App = (props) => {
        const products = [
          { prices: [1.2, 1.1, 1.0], name: "apple" },
          { prices: [1.8, 1.0, 1.9], name: "oragne" },
          { prices: [1.0, 0.9, 1.1], name: "bananas" },
        ];
        console.log(products);

        return (
          <div>
            <ul className="main">
              {products.map((f, i) => {
                return (
                  <li key={i} className="main">
                    {f.name} <Fruit prices={f.prices} />
                  </li>
                );
              })}
            </ul>
          </div>
        );
      };

      const Fruit = (props) => {
        const { prices } = props;
        const moyenne = (
          prices.reduce(
            (preValue, currentValue) => preValue + currentValue,
            0
          ) / prices.length
        ).toFixed(2);
        return (
          <ul className="main">
            <li className="main">prices :</li>
            <Price prices={prices} />
            <li className="main">average : {moyenne}</li>
          </ul>
        );
      };

      const Price = (props) => {
        const { prices } = props;
        return (
          <ul className="main">
            {prices.map((p, i) => (
              <li className="main" key={i}>
                {p}
              </li>
            ))}
          </ul>
        );
      };

      // Rendu dans le DOM
      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>
